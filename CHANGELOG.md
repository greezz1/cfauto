# 版本更新日志 (Changelog)

> 倒序排列，最新版本在前。

---

## V10.10.0 (2026-02-24)

### ⚡ 反代落地部署全面升级 (YXIP Improvements)

* **Joey 部署架构多维兼容**：彻底重构 Joey 项目自动优选部署流。考虑到不同用户使用的底层架构，不仅提供了针对绑定高级 CFnew 框架大写 `C` 核心库直接注入 JSON 参数的强控直发特性（即原生有 KV 模式）；更是对极简版老字号架构提供了无缝的向下兼容：无需选取具体配置节点，在面板通过切换进入“**Joey 兼容（变量模式）**”通道后即可瞬间利用全局的系统级 `yx` 字段实现全版统一下放，一次设置所有新项目可通用！
* 为配合上述兼容变量模式特性，交互面板进行优化：当锁定纯变量覆写策略时自动停用、隐藏下方的 CF 账号选取列表和全选组件，进一步避免用户误解目标受众与操作域。
* 本次升级不仅完整统一了多种不同类型边缘业务的云端批量维护手感，还在代码层将所有的 YXIP 操作模板变量处理完全隔离原生化消除了一众运行隐患，使得稳定性大幅提高。

---

## V10.9.0 (2026-02-24)

### ⚡ 新功能：全球反代落地节点系统 (YXIP) 集成

* 中控台主面板全新加入 **“⚡ 反代落地部署”** 专属功能入口按钮。
* 复刻独立版 `yxip.js` 功能逻辑：构建暗黑毛玻璃风格全屏交互模态框，直连上游实时获取全球区域 CF 节点池，支持按任意国家/地区分组、限额并摇号随机筛选。
* **CMLiu 专属全自动直写适配**：自动检索选中 Cloudflare 账号下的全部 CMLiu 框架应用，通过底层 API 跨域提取各个应用绑定的专用 KV 空间 ID，并将摇号生成的优选节点库资源**一键批量写入为该节点的原始 `ADD.txt` 订阅池内**，无需外部链接即可无缝原生应用高性能节点！
* **Joey 方案直插适配**：同时支持生成原生 Joey 适用的角标协议资源格式，并支持瞬间覆盖式注入其全局环境变量组的专属保留字(`yx` 变量)，便于后续重新批设下发。

---

## V10.8.0 (2026-02-20)

### 🚫 新功能：ECH 禁用 workers.dev 域名开关

* ECH 配置卡片新增「🚫 禁用默认 \*.workers.dev 域名」复选框（默认不勾选）。
* 勾选后部署成功，自动调用 CF API 将该 Worker 的 workers.dev 子域名禁用。
* 不勾选则保持启用（默认行为）。
* 工作台日志显示 `🚫 默认域名已禁用` 或 `🌐 默认域名已启用` 的操作结果。

---

## V10.7.0 (2026-02-20)

### 🔑 新功能：ECH Token 鉴权开关

* ECH 配置卡片底部新增虚线框区域，包含 Toggle 开关和 Token 输入框。
* **填写 Token + 开启开关** → 部署时将 Token 注入 `ech.js` 的 `const token = '...'`，启用 WebSocket 鉴权。
* **不填 / 关闭开关** → `const token = ''`（无鉴权，默认行为），即使输入框有内容也不会注入。
* Token 值同时保存到 `VARS_ech` 中，方便下次预填。

---

## V10.6.0 (2026-02-16)

### 🚀 新功能

* 工作台改为底部弹窗显示，主页添加「📋 工作台」按钮。
* 批量部署新增「📦 采用已保存变量 (VARS)」复选框（默认开启）。
* 修复 1101 实时步骤打印到工作台。
* 一键修复 1101 新增自定义域名恢复流程：记录变量 → 删除 Worker → 随机改子域名 → 相同名称重建 → 恢复所有变量 + 域名绑定。

### 🗑️ 移除

* 删除所有混淆功能（serverSideObfuscate、JavaScriptObfuscator CDN、自动混淆开关、批量部署混淆）。

### ✨ 改进

* 所有操作日志统一输出到工作台弹窗。
* `DEPLOY_CONFIG` 更新不再依赖 SHA，修复本地时间不更新。

---

## V10.3.3 (2026-02-16)

### 🐛 修复

* 重写 `serverSideObfuscate`：仅用头部随机注释+尾部 var 声明，修复 cmliu 1101。
* 子域名修改改为 DELETE+PUT 两步操作，解决 "Account already has an associated subdomain" 错误。

---

## V10.3.2 (2026-02-16)

### 🐛 修复

* 手动部署改回服务端反指纹混淆，修复 `JavaScriptObfuscator` 对 edgetunnel 代码过于激进导致 Workers 1101 错误。
* `JavaScriptObfuscator` 仅保留给批量部署使用。

---

## V10.3.1 (2026-02-16)

### 🔐 反指纹混淆

* 重写 `serverSideObfuscate`：注入大量随机死代码，每次部署指纹完全不同，防止 CF 特征码匹配。

### 📋 文档重构

* 新增 `CHANGELOG.md` 独立版本记录文件（倒序排列）。
* `worker.js` 和 `README.md` 仅保留当前版本日志，历史版本移至本文件。

---

## V10.3.0 (2026-02-16)

### 🚀 手动部署前端混淆

* 点击「🚀 部署更新」时，若开启自动混淆，在浏览器端完整混淆后再部署。
* `coreDeployLogic` 新增 `customCode` 参数，支持接收前端预混淆代码。

---

## V10.2.3 (2026-02-16)

### 🐛 Bug 修复

* 重写 `serverSideObfuscate`，移除危险的注释删除正则（误删模板字面量中 HTML/URL 内容导致 `SyntaxError`）。

---

## V10.2.2 (2026-02-16)

### 🐛 Bug 修复

* DEPLOY_CONFIG 仅在至少一个 Worker 成功部署后才更新 SHA。
* 手动部署读取「自动混淆」开关。

---

## V10.2.1 (2026-02-16)

### 🐛 关键 Bug 修复

* 修复 `coreDeployLogic` 中 `targetSha='latest'` 被当作 git ref 导致自动更新失败。
* 修复部署后 deploy config 被错误锁定为 `fixed` 模式。
* 修复历史版本「Always Latest」部署触发 URL 构造错误。

---

## V10.2.0 (2026-02-14)

### 🌌 暗黑星空主题

* 新增暗黑星空模式 / 明亮模式主题切换。
* Canvas 动态星空背景（闪烁星星 + 流星 + 星云光晕）。
* 卡片毛玻璃半透明效果，全组件暗黑模式适配。
* 主题选择通过 localStorage 持久化。

---

## V10.1.0 (2026-02-14)

### 🌐 子域名管理

* 查看/修改 workers.dev 子域名前缀。
* 安全二次确认 + 格式校验。
* 新增 `/api/get_subdomain`、`/api/change_subdomain` 接口。

---

## V10.0.0 (2026-02-14)

### 🔐 安全加固

* 登录改为 POST 提交，Cookie 增加 Secure 标志。
* API 方法校验、CSRF 防护、统一错误响应。

### 🐛 缺陷修复

* 修复混淆正则误删 URL、checkUpdate 变量冲突、编辑账号 stats 重置。

### ⚡ 改进

* 熔断/自动更新动态化，compatibility_date 动态化。
* 前后端数据消除重复，由后端动态注入。
